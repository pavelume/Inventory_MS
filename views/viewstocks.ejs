<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Custom CSS-->
    <link rel="stylesheet" href="styles.css">
    <!--Semantic-UI CSS-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">

    <title>View Stocks</title>
  </head>
  <body>
     <!--Vertical Navbar-->
  <!-- End vertical navbar -->
    
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand p-3 mx-5" href="/billing">Aurora IT</a>
        <ul class="nav navbar-nav navbar-right">
          <li class="nav-item">
            <a class="nav-link active p-3" aria-current="page" href="/billing">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active p-3" aria-current="page" href="/viewstocks">View Stock</a>
          </li>
          <li class="nav-item">
            <a class="nav-link p-3" aria-current="page" href="/stocks">Add Stock</a>
          </li>
        </ul>
        <form action="/logout?_method=DELETE" method="POST" class="me-5">
          <center><button type="submit" class="btn btn-danger mb-4 mt-2" ><p class="text-white">Log Out</p></button></center>
        </form>
    </div>
  </nav>


  <!-- Page content holder -->
  <div class="p-5" id="content">
    <!-- Toggle button -->
    <!-- Navbar -->

    <!-- Page content -->
    <h1  class="text-center ui horizontal divider header text-primary">Stocks Summary</h1>
    <br>
    <!-- <center><img class="ui medium rounded image" src="stock.svg"></center> -->
    <br>
    <form action="stocks_query" method="POST">
      <div class="ui four column grid">
        <div class="row">
        <div class="column">
        <h3>View Stock By</h3>
        </div>
        
        <div class="column">
        <div class="form-check form-check-inline form-switch">
             <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="brand" oninput="myFunction()">
            <label class="form-check-label" for="exampleRadios2">
                Brand
            </label>
        </div>
        <div class="form-check form-check-inline form-switch">
            <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios3" value="category" oninput="myFunction()">
            <label class="form-check-label" for="exampleRadios3">
                Category
            </label>
        </div>
        </div>
        <div class="column">
            <select class="form-select" aria-label="Disabled select example" id="brand" name="selected_brand" disabled>
                <option selected>Select Brand</option>
                <% brands.forEach(function(order){ %>
                  <option value="<%= order.Brand %>"><%= order.Brand %></option>
                  <% }); %>
              </select>
        </div>
        <div class="column">
            <select class="form-select" aria-label="Disabled select example" id="category" name="selected_category" disabled>
                <option selected>Select Category</option>
                <% categories.forEach(function(order){ %>
                  <option name="<%= order.Category %>" value="<%= order.Category %>"><%= order.Category %></option>
                <% }); %>
              </select>
        </div>
        </div>
        </div>
        <br>
        <center>
          <div class="">
            <button class="btn btn-primary" type="submit">Search &emsp;</button>
          </div>
        </center>
      </form>
    <% if(filter_type == 'None') { %>  
    <table class="table table-striped">
        <thead>
        <tr>
            <th>Item ID</th>
            <th>Item Name</th>
            <th>Category</th>
            <th>Brand Name</th>
            <th>Models</th>
            <th>Amount</th>
            <th>Quantity</th>
            <th>Date Entered</th>
            <th>Time Entered</th>
        </tr>
    </thead>
    <tbody>
        <% all_stocks.forEach(function(order){ %>
            <tr>
                <td><%= order.ItemID %>
                <td><%= order.ItemName %></td>
                <td><%= order.Category %></td>
                <td><%= order.Brand %></td>
                <td><%= order.model %></td>
                <td><%= order.Amount %></td>
                <td><%= order.Quantity %></td>
                <td><%= order.StockDate %></td>
                <td><%= order.StockTime %>&emsp;<form action="/deletestock" method="POST"><input type="hidden" name="deleteid" value="<%= order.ItemID %>"><button type="submit" class="btn btn-danger btn-sm">Delete</button></form></td>
                <!-- <form action="/deleteitem" method="POST"><input type="hidden" name="deleteid" value="<%= order.TransactionID %>"><button type="submit" class="btn btn-danger btn-sm">Delete</button></form> -->
            </tr>
        <% }); %>
    </tbody>
    </table>
    <% } %> 

    <% if(filter_type == 'brand') { %>
      <br>  
      <h2 class="text-primary">Showing Stocks for <%= filter_name %>  </h2>
      <br>
      <table class="table table-striped">
          <thead>
          <tr>
              <th>Item ID</th>
              <th>Item Name</th>
              <th>Category</th>
              <th>Brand Name</th>
              <th>Model</th>
              <th>Amount</th>
              <th>Quantity</th>
              <th>Date Entered</th>
              <th>Time Entered</th>
          </tr>
      </thead>
      <tbody>
          <% display_content.forEach(function(order){ %>
              <tr>
                  <td><%= order.ItemID %>
                  <td><%= order.ItemName %></td>
                  <td><%= order.Category %></td>
                  <td><%= order.Brand %></td>
                  <td><%= order.model %></td>
                  <td><%= order.Amount %></td>
                  <td><%= order.Quantity %></td>
                  <td><%= order.StockDate %></td>
                  <td><%= order.StockTime %>&emsp;<form action="/deletestock" method="POST"><input type="hidden" name="deleteid" value="<%= order.ItemID %>"><button type="submit" class="btn btn-danger btn-sm">Delete</button></form></td>
                  <!-- <form action="/deleteitem" method="POST"><input type="hidden" name="deleteid" value="<%= order.TransactionID %>"><button type="submit" class="btn btn-danger btn-sm">Delete</button></form> -->
              </tr>
          <% }); %>
      </tbody>
      </table>
      <% } %> 

      <% if(filter_type == 'category') { %>
        <br>  
        <h2 class="text-primary">Showing Stocks for <%= filter_name %>  </h2>
        <br>
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Item ID</th>
                <th>Item Name</th>
                <th>Category</th>
                <th>Brand Name</th>
                <th>Model</th>
                <th>Amount</th>
                <th>Quantity</th>
                <th>Date Entered</th>
                <th>Time Entered</th>
            </tr>
        </thead>
        <tbody>
            <% display_content.forEach(function(order){ %>
                <tr>
                    <td><%= order.ItemID %>
                    <td><%= order.ItemName %></td>
                    <td><%= order.Category %></td>
                    <td><%= order.Brand %></td>
                    <td><%= order.model %></td>
                    <td><%= order.Amount %></td>
                    <td><%= order.Quantity %></td>
                    <td><%= order.StockDate %></td>
                    <td><%= order.StockTime %>&emsp;<form action="/deletestock" method="POST"><input type="hidden" name="deleteid" value="<%= order.ItemID %>"><button type="submit" class="btn btn-danger btn-sm">Delete</button></form></td>
                    
                </tr>
            <% }); %>
        </tbody>
        </table>
        <% } %> 

    </div>
    
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    <!-- Semnatic-UI Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.js"></script>

    <script>
      $(function() {
    // Sidebar toggle behavior
    $('#sidebarCollapse').on('click', function() {
      $('#sidebar, #content').toggleClass('active');
    });
  });
  
    </script>

<script>

  function myFunction(){
    if (document.getElementById('exampleRadios2').checked == true){
      document.getElementById("brand").disabled = false;
      document.getElementById("category").disabled = true;
    }
    if (document.getElementById('exampleRadios3').checked == true){
      document.getElementById("brand").disabled = true;
      document.getElementById("category").disabled = false;
    }
  }
</script>
  </body>
</html>